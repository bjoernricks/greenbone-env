#!/usr/bin/env python3

import os
import sys

from pathlib import Path

DEFAULT_PREFIX = Path.home() / 'install' / 'master'


def filter_none(paths):
    return [path for path in paths if path is not None]


def main():
    if len(sys.argv) > 1:
        prefix = Path(sys.argv[1]).absolute()
    else:
        prefix = DEFAULT_PREFIX

    env_path = os.getenv('PATH')
    env_pythonpath = os.getenv('PYTHONPATH')

    path = ':'.join(filter_none([
        '%s/sbin' % (prefix,),
        '%s/bin' % (prefix,),
        env_path,
    ]))

    pythonpath = ':'.join(filter_none([
        '%s/lib/python2.7/site-packages' % (prefix,),
        env_pythonpath,
    ]))

    print('export INSTALL_PREFIX=%s' % (prefix,))
    print('export LD_LIBRARY_PATH=%s/lib' % (prefix,))
    print('export PKG_CONFIG_PATH=%s/lib/pkgconfig' % (prefix,))
    print('export PATH=%s' % (path,))
    print('export PYTHONPATH=%s' % (pythonpath,))


if __name__ == '__main__':
    main()

#  vim: set ts=8 sw=4 tw=80:
